/*
* Kendo UI v2014.3.1316 (http://www.telerik.com/kendo-ui)
* Copyright 2015 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.scheduler.view.min"],e)}(function(){return function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return l(t,f(e)),t}function i(e,t,n){return e>=t&&n>=e}function r(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}function o(e){var t,n=0;if(e.columns){for(t=0;e.columns.length>t;t++)n+=o(e.columns[t]);return e.colspan=n,n}return e.colspan=1,1}var a=window.kendo,s=a.ui,l=a.date.setTime,c=s.SchedulerView,d=e.extend,u=e.proxy,h=a.date.getDate,f=a.date.getMilliseconds,p=a.date.MS_PER_DAY,g=a.date.MS_PER_MINUTE,m=".kendoTimelineView",v=a.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),_=a.template("<span class='k-link k-nav-day'>#=kendo.format('{0:m}', date)#</span>"),y='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',w=c.extend({init:function(e,t){var n=this;c.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=r(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var t,n,i,r,o,s,l,c,d,u,h,f=new Date,p=this.options;if(this.datesHeader.find(".k-current-time").remove(),this._isInDateSlot({start:f,end:f}))for(p.currentTimeMarker.useLocalTimezone===!1&&(t=p.dataSource.options.schema.timezone,p.dataSource&&t&&(n=a.timezone.offset(f,t),f=a.timezone.convert(f,f.getTimezoneOffset(),n))),i=p.group&&"vertical"!=p.group.orientation?this.groups.length:1,r=0;i>r;r++){if(o=this.groups[r],s=a.date.toUtcTime(f),l=o.timeSlotRanges(s,s+1),0===l.length)return;c=l[0].collection,d=c.slotByStartDate(f),d&&(u=e("<div class='k-current-time'></div>"),h=this.datesHeader,u.appendTo(h.find(".k-scheduler-header-wrap")).css({left:Math.round(l[0].innerRect(f,new Date(f.getTime()+1),!1).left),width:"1px",bottom:"1px",top:0}))}},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;i!==!1&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(u(this._currentTimeMarkerUpdater,n),e))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+m,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+m,".k-scheduler-content td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+m,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new a.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new a.UserEvents(t.element,{filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(a.attr("uid"))}),n.preventDefault()}}))},_slotByPosition:function(e,t){var n,i,r,o,s=this.content,l=s.offset();for(e-=l.left,t-=l.top,this._isRtl?(o=a.support.browser,o.mozilla?(e+=s[0].scrollWidth-s[0].offsetWidth,e+=s[0].scrollLeft):o.msie?(e-=s.scrollLeft(),e+=s[0].scrollWidth-this.content[0].offsetWidth):o.webkit&&(e+=s[0].scrollLeft)):e+=s[0].scrollLeft,t+=s[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(i=this.groups[r],n=i.timeSlotByPosition(e,t))return n;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",date:a.date.today(),startTime:a.date.today(),endTime:a.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:v,dateHeaderTemplate:_,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=d({},a.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,y),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_render:function(t){var n=this;t=t||[],n._dates=t,n._startDate=t[0],n._endDate=t[t.length-1||0],n._calculateSlotRanges(),n.createLayout(n._layout(t)),n._content(t),n._footer(),n._setContentWidth(),n.refreshLayout(),n.datesHeader.on("click"+m,".k-nav-day",function(t){var i=e(t.currentTarget).closest("th"),r=n._slotByPosition(i.offset().left,n.content.offset().top);n.trigger("navigate",{view:"timeline",date:r.startDate()})}),n.timesHeader.find("table tr:last").hide(),n.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var e=this.content,t=e.width(),n=this.content.find("table"),i=n.find("tr:first").children().length,r=100,o=i*this.options.columnWidth;o>t&&(r=Math.ceil(o/t*100)),n.add(this.datesHeader.find("table")).css("width",r+"%")},_calculateSlotRanges:function(){var e,t,n,i,r=this._dates,o=this.startTime(),s=this.endTime();for(f(s)===f(a.date.getDate(s))&&(s=a.date.getDate(s),l(s,p-1)),s=f(s),o=f(o),e=[],t=0;r.length>t;t++)n=h(r[t]),l(n,o),i=h(r[t]),l(i,s),e.push({start:a.date.toUtcTime(n),end:a.date.toUtcTime(i)});this._slotRanges=e},_forTimeRange:function(e,t,i,r){var o,a,s,c,d,u,h,m,v,_,y,w,b,x,k,C,S,T;for(e=n(e),t=n(t),o=this,a=f(e),s=f(t),c=o.options.minorTickCount,d=o.options.majorTick*g,u=d/c||1,h=new Date(+e),m=h.getDate(),_=0,w="",y=p/u,a!=s&&(a>s&&(s+=p),y=(s-a)/u),y=Math.round(y);y>_;_++)b=_%(d/u),x=0===b,k=c-1>b,C=b===c-1,S=c,y%c!==0&&(T=c>y-(_+1),x&&T&&(S=y%c)),w+=i(h,x,k,C,S),l(h,u,!1);return s&&(v=f(h),m<h.getDate()&&(v+=p),v>s&&(h=new Date(+t))),r&&(w+=r(h)),w},_layout:function(e){var t,n,i,r=[],a=[],s=this,l=[{text:s.options.messages.defaultRowText}],c=[];for(t=0;s.options.minorTickCount>t;t++)c.push({text:"",className:""});for(this._forTimeRange(s.startTime(),s.endTime(),function(e,t,n,i,a){var l,d=s.majorTimeHeaderTemplate;t&&(l={text:d({date:e}),className:i?"k-slot-cell":"",columns:c.slice(0,a)},o(l),r.push(l))}),n=0;e.length>n;n++)a.push({text:s.dateHeaderTemplate({date:e[n]}),className:"k-slot-cell",columns:r.slice(0)});return i=this.groupedResources,i.length&&("vertical"===this._groupOrientation()?l=s._createRowsLayout(i,null,this.groupHeaderTemplate):a=s._createColumnsLayout(i,a,this.groupHeaderTemplate)),{columns:a,rows:l}},_footer:function(){var t,n,i,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',n=r.footer.command,n&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+m,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_content:function(e){var t,n,i,r,o,s=this,l=s.options,c=s.startTime(),d=this.endTime(),u=1,h=1,f=e.length,p="",g=this.groupedResources,m=this.slotTemplate,v=!1;for(g.length&&(v="vertical"===s._groupOrientation(),v?h=s._groupCount():u=s._groupCount()),p+="<tbody>",t=function(t){var o,c="",d="",u=function(e){return function(){return s._resourceBySlot({groupIndex:e})}};return a.date.isToday(e[r])&&(d+="k-today"),(a.date.getMilliseconds(t)<a.date.getMilliseconds(l.workDayStart)||a.date.getMilliseconds(t)>=a.date.getMilliseconds(l.workDayEnd)||!s._isWorkDay(e[r]))&&(d+=" k-nonwork-hour"),c+="<td"+(""!==d?' class="'+d+'"':"")+">",o=a.date.getDate(e[r]),a.date.setTime(o,a.date.getMilliseconds(t)),c+=m({date:o,resources:u(v?n:i)}),c+="</td>"},n=0;h>n;n++){for(p+="<tr>",i=0;u>i;i++)for(r=0,o=f;o>r;r++)p+=this._forTimeRange(c,d,t);p+="</tr>"}p+="</tbody>",this.content.find("table").append(p)},_groups:function(){var e,t,n,i,r=this._groupCount(),o=this._dates,s=o.length;for(this.groups=[],e=0;r>e;e++)t=this._addResourceView(e),n=o[0],i=o[o.length-1||0],t.addTimeSlotCollection(n,a.date.addDays(i,1));this._timeSlotGroups(r,s)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,p,g,m,v,_,y,w,b=this._timeSlotInterval(),x=this._isVerticallyGrouped(),k=this.content.find("tr"),C=k.length;for(k.attr("role","row"),x&&(C=Math.floor(C/e)),n=0;e>n;n++)for(i=0,r=this.groups[n],x&&(i=n),a=i*C,s=0,x||(s=n),l=k[a].children,c=l.length/(x?1:e),d=c/t,u=0;t>u;u++)for(h=u*d+c*s,o=f(new Date(+this.startTime())),p=0;d>p;p++)g=l[p+h],m=r.getTimeSlotCollection(0),v=this._dates[u],_=Date.UTC(v.getFullYear(),v.getMonth(),v.getDate()),y=_+o,w=y+b,g.setAttribute("role","gridcell"),g.setAttribute("aria-selected",!1),m.addTimeSlot(g,y,w,!0),o+=b},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*g},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(t){var n,r,o,s,l,c;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),n=[],this._eventsByResource(t,this.groupedResources,n),r=e.map(this._dates,function(t){return Math.max.apply(null,e.map(n,function(n){return e.grep(n,function(e){return i(t,h(e.start),h(e.end))}).length}))}),o=[],s=0,l=0;n.length>l;l++)c={groupIndex:l,maxRowCount:0,events:{}},o.push(c),this._renderEvents(n[l],l,c),c.maxRowCount>s&&(s=c.maxRowCount);this._setRowsHeight(o,n.length,s),this._positionEvents(o,n.length),this.trigger("activate")},_positionEvents:function(e,t){var n,i,r,o;for(n=0;t>n;n++){i=e[n].events;for(r in i)o=i[r],this._positionEvent(o)}},_setRowsHeight:function(e,t,n){var i,r,o,s,l,c=this.options.eventHeight+2,d=this._getBottomRowOffset();for(t=this._isVerticallyGrouped()?t:1,i=0;t>i;i++)r=this._isVerticallyGrouped()?e[i].maxRowCount:n,r=r?r:1,o=(c+2)*r+d,s=this.times.find(a.format("tr:nth-child({0})",i+1)),l=this.content.find(a.format("tr:nth-child({0})",i+1)),s.height(o),l.height(o);this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e,t,n=.5*this.options.eventHeight,i=this._isMobile();return i?(e=30,t=60):(e=15,t=30),n>t?n=t:e>n&&(n=e),n},_positionEvent:function(e){var t,n,i=this.options.eventHeight+2,r=e.slotRange.innerRect(e.start,e.end,!1);r.top=e.slotRange.start.offsetTop,t=r.right-r.left-2,0>t&&(t=0),n=r.left,this._isRtl&&(n-=this.content[0].scrollWidth-this.content[0].offsetWidth),e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(i+2)+"px",left:n,width:t})},_refreshSlots:function(){for(var e=0;this.groups.length>e;e++)this.groups[e].refresh()},_eventsByResource:function(e,t,n){var i,r,o,s,l=t[0];if(l)for(i=l.dataSource.view(),r=0;i.length>r;r++)o=this._resourceValue(l,i[r]),s=new a.data.Query(e).filter({field:l.field,operator:c.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(s,t.slice(1),n):n.push(s);else n.push(e)},_isInDateSlot:function(e){var t=e.start,n=e.end,i=h(this._startDate),r=a.date.addDays(h(this._endDate),1);return r>t&&n>=i?!0:!1},_isInTimeSlot:function(e){var t,n=e._startTime||a.date.toUtcTime(e.start),i=e._endTime||a.date.toUtcTime(e.end),r=this._slotRanges;for(n===i&&(i+=1),t=0;r.length>t;t++)if(r[t].end>n&&i>r[t].start)return!0;return!1},_adjustEvent:function(e){var t,n=e.start,i=e.end,r=e._time("start"),o=e._time("end"),s=f(this.startTime()),c=f(this.endTime()),d=null,u=null,g=!1,m=!1;return e.isAllDay?(d=h(n),s>r&&(l(d,s),m=!0),u=h(i),c===f(h(this.endTime()))?u=a.date.addDays(u,1):(l(u,c),g=!0)):(c=0===c?p:c,s>r?(d=h(n),l(d,s),m=!0):r>c&&(d=h(n),d=a.date.addDays(d,1),l(d,s),m=!0),o>c?(u=h(i),l(u,c),g=!0):s>o&&(u=h(i),u=a.date.addDays(u,-1),l(u,c),g=!0)),t=e.clone({start:d?d:n,end:u?u:i,_startTime:d?a.date.toUtcTime(d):e._startTime,_endTime:u?a.date.toUtcTime(u):e._endTime,isAllDay:!1}),{occurrence:t,head:g,tail:m}},_renderEvents:function(e,t,n){var i,r,o,a,s,l,c,d,u,h,f;for(r=0,o=e.length;o>r;r++)i=e[r],this._isInDateSlot(i)&&(a=i.isAllDay||i.end.getTime()-i.start.getTime()>=p,s=this.content,(a||this._isInTimeSlot(i))&&(l=this._adjustEvent(i),c=this.groups[t],c._continuousEvents||(c._continuousEvents=[]),d=c.slotRanges(l.occurrence,!1),u=d[0],this._isInTimeSlot(l.occurrence)&&(h=this._createEventElement(l.occurrence,i,u.head||l.head,u.tail||l.tail),h.appendTo(s).css({top:0,height:this.options.eventHeight}),f={start:l.occurrence._startTime||l.occurrence.start,end:l.occurrence._endTime||l.occurrence.end,element:h,uid:i.uid,slotRange:u,rowIndex:0,offsetTop:0},n.events[i.uid]=f,this.addContinuousEvent(c,u,h,i.isAllDay),this._arrangeRows(f,u,n))))},addContinuousEvent:function(e,t,n,i){var r=e._continuousEvents;r.push({element:n,isAllDay:i,uid:n.attr(a.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,n,i,r){var o,s,l=this.eventTemplate,c=this.options.editable,u=this._isMobile(),h=c&&c.destroy!==!1&&!u,f=c&&c.resize!==!1,p=n._time("start"),g=n._time("end"),m=n.start,v=n.end,_=this.eventResources(n);return n._startTime&&(m=new Date(p),m=a.timezone.apply(m,"Etc/UTC")),n.endTime&&(v=new Date(g),v=a.timezone.apply(v,"Etc/UTC")),o=d({},{ns:a.ns,resizable:f,showDelete:h,head:i,tail:r,singleDay:1==this._dates.length,resources:_,inverseColor:_&&_[0]?this._shouldInverseResourceColor(_[0]):!1},n,{start:m,end:v}),s=e(l(o)),this.angular("compile",function(){return{elements:s,data:[{dataItem:o}]}}),s},_arrangeRows:function(e,t,n){var i,r,o,a,s,l,d=t.start.index,u=t.end.index,h=c.collidingEvents(t.events(),d,u);for(t.addEvent({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),h.push({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),i=c.createRows(h),i.length>n.maxRowCount&&(n.maxRowCount=i.length),r=0,o=i.length;o>r;r++)for(a=i[r].events,s=0,l=a.length;l>s;s++)n.events[a[s].uid].rowIndex=r},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length-1):1},_updateEventForSelection:function(e){var t=this._adjustEvent(e.clone());return t.occurrence},_updateEventForMove:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,n){var i,r,o,a,s,l,c,d,u,h,f,p=this.groups[t],g=e.clone({start:e.start,end:e.end}),m=g.duration();for(g.start=new Date(g.start.getTime()+n),g.end=new Date(+g.start+m),i=this._adjustEvent(g),r=p.slotRanges(i.occurrence,!1),this._removeMoveHint(),o=0;r.length>o;o++)a=r[o],s=a.start,l=this._createEventElement(i.occurrence,i.occurrence,!1,!1),l.addClass("k-event-drag-hint"),c=a.innerRect(i.occurrence.start,i.occurrence.end,this.options.snap),d=c.right-c.left-2,0>d&&(d=0),u=c.left,this._isRtl&&(u-=this.content[0].scrollWidth-this.content[0].offsetWidth),h={left:u,top:s.offsetTop,height:s.offsetHeight-2,width:d},l.css(h),this._moveHint=this._moveHint.add(l);f=this.content,this._moveHint.appendTo(f)},_updateResizeHint:function(e,t,n,i){var r,o,s,l,d,u,h,f,p,g,m,v=this.groups[t],_=v.ranges(n,i,!1,!1);for(this._removeResizeHint(),r=0;_.length>r;r++)o=_[r],s=o.startSlot(),l=o.innerRect(n,i,!1),l.top=s.offsetTop,d=l.right-l.left,u=s.offsetHeight,h=l.left,f=this.content,this._isRtl&&(h-=f[0].scrollWidth-f[0].offsetWidth),p=c.fn._createResizeHint.call(this,h,l.top,d,u),this._resizeHint=this._resizeHint.add(p);g="t",m=this.content,this._resizeHint.appendTo(m),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(n),g)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(i),g))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,n,i,r){var o=t[0].start,a=t[t.length-1].end;n&&!r&&o.index===a.index&&o.collectionIndex===a.collectionIndex&&(e.backward=i)},_changeGroup:function(e,t){var n=t?"prevGroupSlot":"nextGroupSlot",i=this[n](e.start,e.groupIndex,!1);return i&&(e.groupIndex+=t?-1:1),i},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?o:(i=r._collection(0,n),i.last())},nextGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o:(i=r._collection(0,n),i.first())},_verticalSlots:function(e,t,n,i){var r=i?"leftSlot":"rightSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isVerticallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_horizontalSlots:function(e,t,n,i){var r=i?"upSlot":"downSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isHorizontallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_changeViewPeriod:function(e,t){var n,i=t?this.previousDate():this.nextDate(),r=e.start,o=e.end;return e.start=new Date(i),e.end=new Date(i),this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0),n=o-r,t?(o=f(this.endTime()),o=0===o?p:o,l(e.start,o-n),l(e.end,o)):(r=f(this.startTime()),l(e.start,r),l(e.end,r+n)),e.events=[],!0},move:function(e,t,n){var i,r,o,s,l,c=!1,d=this.groups[e.groupIndex],u=a.keys,h=d.ranges(e.start,e.end,!1,!1);if(t===u.DOWN||t===u.UP)c=!0,o=t===u.UP,this._updateDirection(e,h,n,o,!0),s=this._verticalSlots(e,h,n,o);else if(!(t!==u.LEFT&&t!==u.RIGHT||(c=!0,o=t===u.LEFT,this._updateDirection(e,h,n,o,!1),s=this._horizontalSlots(e,h,n,o),s.startSlot&&s.endSlot||n||!this._changeViewPeriod(e,o,!1))))return c;return c&&(i=s.startSlot,r=s.endSlot,n?(l=e.backward,l&&i?e.start=i.startDate():!l&&r&&(e.end=r.endDate())):i&&r&&(e.start=i.startDate(),e.end=r.endDate()),e.events=[]),c},destroy:function(){var e=this;e.element&&e.element.off(m),e.footer&&e.footer.remove(),e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),c.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&e._addUserEvents.destroy(),e.options.editable.update!==!1&&e._editUserEvents.destroy())}});d(!0,s,{TimelineView:w,TimelineWeekView:w.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(i),i=a.date.nextDay(i);this._render(r)}}),TimelineWorkWeekView:w.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return a.date.dayOfWeek(a.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=a.date.dayOfWeek(e,this.options.workWeekStart,-1),n=a.date.dayOfWeek(t,this.options.workWeekEnd,1),i=[];n>=t;)i.push(t),t=a.date.nextDay(t);this._render(i)}}),TimelineMonthView:w.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,0,0,0),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.firstDayOfMonth(n),r=a.date.lastDayOfMonth(n),o=[];for(e=0,t=r.getDate();t>e;e++)o.push(i),i=a.date.nextDay(i);this._render(o)}})})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});